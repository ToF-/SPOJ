REQUIRE ffl/tst.fs
REQUIRE vertex.fs

." TEST VERTEX" CR

T{
    1024 DUP * HEAP-ALLOCATE
    17
    2 SWAP PQ-INDEX!
    4807 SWAP TOTAL-COST!
    VISIT!
    DUP VISITED ?TRUE
    UNVISIT!
    DUP VISITED ?FALSE
    DUP PQ-INDEX 2 ?S
    DUP #EDGES 17 ?S
    TOTAL-COST 4807 ?S

    VARIABLE MY-VERTEX
    S" foo-bar" 4 NEW-VERTEX
    VERTICE @ 1 ?S
    VERTICE @ 1- VERTEX^ MY-VERTEX !
    MY-VERTEX @ CELL+ @ 4 ?S
    300 1 EDGE 0 MY-VERTEX @ ADD-EDGE
    200 2 EDGE 1 MY-VERTEX @ ADD-EDGE
    250 3 EDGE 2 MY-VERTEX @ ADD-EDGE
    100 4 EDGE 3 MY-VERTEX @ ADD-EDGE
    MY-VERTEX @ 2 CELLS + 3 CELLS + @
    DUP COST 100 ?S
    VERTEX# 4 ?S
    MY-VERTEX @ @ COUNT S" foo-bar" ?STR
    HEAP-FREE
}T
