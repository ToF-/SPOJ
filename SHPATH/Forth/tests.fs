REQUIRE ffl/tst.fs
REQUIRE shpath.fs

PAGE
T{
    NAMES OFF
    S" foo bar" ADD-NAME
    S" qux" ADD-NAME

    2 NAME^ COUNT S" qux" ?STR
    1 NAME^ COUNT S" foo bar" ?STR

    EDGES OFF
    2317 4807 42 ADD-EDGE
    EDGE^ @
    DUP EDGE>DEST 42 ?S
    DUP EDGE>COST 4807 ?S
    EDGE>NEXT 2317 ?S

    S" furmeyer" INSERT-NODE
    s" mennecy"  INSERT-NODE
    s" salazac"  INSERT-NODE
    S" furmeyer" FIND-NODE
    DUP LINK>NAME NAME^ COUNT S" furmeyer" ?STR
    LINK>NODE 1 ?S

    S" salazac"  FIND-NODE
    DUP LINK>NAME NAME^ COUNT S" salazac" ?STR
    LINK>NODE 3 ?S
    S" coulomb" FIND-NODE ?FALSE

}T
T{
    PQUEUE OFF
    10 4807  PQUEUE-UPDATE 10 PQUEUE-INDEX@ 1 ?S
    20 2317  PQUEUE-UPDATE 20 PQUEUE-INDEX@ 1 ?S 10 PQUEUE-INDEX@ 2 ?S
    30 10000 PQUEUE-UPDATE 30 PQUEUE-INDEX@ 3 ?S
    40 42    PQUEUE-UPDATE 40 PQUEUE-INDEX@ 1 ?S
    40 42000 PQUEUE-UPDATE 40 PQUEUE-INDEX@ 4 ?S
    10 480   PQUEUE-UPDATE 10 PQUEUE-INDEX@ 1 ?S
    PQUEUE-EXTRACT-MIN 480 ?S 10 ?S
    10 PQUEUE-INDEX@ 0 ?S
    PQUEUE-EXTRACT-MIN 2317 ?S 20 ?S
    PQUEUE-EXTRACT-MIN 10000 ?S 30 ?S
    PQUEUE-EXTRACT-MIN 42000 ?S 40 ?S
    10 256 PQUEUE-UPDATE
    PQUEUE-EXTRACT-MIN 256 ?S 10 ?S
}T

T{
    BITSET-INIT
    4807 BITSET-INCLUDE? ?FALSE
    4807 BITSET-INCLUDE!
    4807 BITSET-INCLUDE? ?TRUE
    4806 BITSET-INCLUDE? ?FALSE
}T

T{
    S"   2317  4807  " STR>NUMBERS
    NUMBERS @ 2 ?S
    NUMBERS 1 CELLS + @ 2317 ?S
    NUMBERS 2 CELLS + @ 4807 ?S
}T

T{
    S"      foo" SKIP-SPACE S" foo" ?STR
    S"    " SKIP-SPACE S" " ?STR
    S" bar" SKIP-SPACE S" bar" ?STR

    S" foo  bar" SKIP-NON-SPACE S"   bar" ?STR
    S" foo" SKIP-NON-SPACE S" " ?STR

    S"    foo     bar   "
    SKIP-SPACE 2DUP SKIP-NON-SPACE EXTRACT-STR .S
}T
BYE
