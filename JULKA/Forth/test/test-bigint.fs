REQUIRE ffl/tst.fs
REQUIRE bigint.fs

." TEST BIGINT" CR
T{
    ." adding 2 dcbs " CR
    HEX
    19 24 DCB+ 43 ?S 0 ?S
    19 19 DCB+ 38 ?S 0 ?S
    15 15 DCB+ 30 ?S 0 ?S
    90 09 DCB+ 99 ?S 0 ?S
    90 10 DCB+ 00 ?S 1 ?S
    99 99 DCB+ 98 ?S 1 ?S
    DECIMAL
}T
T{
    ." halving a dcb " CR
    HEX
    0 24 DCB2/ 12 ?S 0 ?S
    0 75 DCB2/ 37 ?S 1 ?S
    0 00 DCB2/ 0  ?S 0 ?S
    0 99 DCB2/ 49 ?S 1 ?S
    1 00 DCB2/ 50 ?S 0 ?S
    1 99 DCB2/ 99 ?S 1 ?S
}T
T{
    ." converting a string to dcb number and back" CR
    HEX
    S" 4807" BN-A STR>BN
    BN-A BN>STR S" 4807" ?STR
    S" 0" BN-A STR>BN
    BN-A BN>STR S" 0" ?STR
    S" 329" BN-A STR>BN
    BN-A BN>STR S" 329" ?STR
    S" 1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890" BN-A STR>BN
    BN-A BN>STR
    S" 1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890" ?STR
}T

T{
    ." adding 2 dcb numbers" CR
    S" 4807" BN-X STR>BN
    S" 2317" BN-Y STR>BN
    BN-X BN-Y BN-A BN+
    BN-A BN>STR S" 7124" ?STR
    S" 328074807" BN-X STR>BN
    S" 12317"     BN-Y STR>BN
    BN-X BN-Y BN-A BN+
    BN-A BN>STR S" 328087124" ?STR
    S" 1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890" BN-X STR>BN
    S" 1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890" BN-Y STR>BN
    BN-X BN-Y BN-A BN+
    BN-A BN>STR
    S" 2469135780246913578024691357802469135780246913578024691357802469135780246913578024691357802469135780" ?STR

}T
T{
    ." halving a dcb number" CR
    S" 1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890" BN-X STR>BN
    BN-X BN-Y BN2/
    BN-Y BN>STR
    S" 617283945061728394506172839450617283945061728394506172839450617283945061728394506172839450617283945" ?STR
}T
